---
tags:
  - MySQL
  - InnoDB
---

## InnoDB
InnoDB의 모든 테이블은 기본적으로 프라이머리 키를 기준으로 클러스터링 되어 저장된다. 즉 PK 순서대로 디스크에 저장된다는 뜻이고 모든 세컨더리 인덱스는 레코드의 주소 대신 PK의 값을 논리적 주소로 사용한다.

PK가 클러스터링 인덱스이기 때문에 PK를 이용한 레인지 스캔은 상당히 빨리 처리된다. PK는 기본적으로 다른 보조 인덱스에 비해 비중이 높게 설정된다.

###### 클러스터? : 컴퓨터 파일 시스템 에서 클러스터 혹은 할당 단위는 파일과 디렉토리(폴더)에 대해 디스크 공간을 할당하는 단위이다. 파일을 저장하도록 할당될 수 있는 가장 논리적 디스크 공간이다. 간단한 의미로 여러개를 하나로 묶는다는 것을 의미한다. 인덱스에서 클러스터링은 값이 비슷한 것들을 묶어서 저장하는 형태로 구현되는데, 비슷한 값들을 동시에 조회하는 케이사 많다라른 부분에서 착안되었다.

###### 클러스터 키에 대해서는 8.8절 '클러스터링 인덱스' 에서 자세하게 다룰 예정.

## MyISAM
InnoDB와는 다르게 MyISAM 스토리지 엔진에서는 클러스터링 키를 지원하지 않는다. MyISAM 테이블에서는 PK와 세컨더리 인덱스는 구조적으로 아무런 차이가 없다.
PK는 유니크 제약을 가진 세컨더리 인덱스일 뿐이다. PK를 포함한 모든 인덱스는 물리적인 레코드의 주소값(ROWID)을 가진다.

| 구분            | InnoDB                                      | MyISAM                                                              |
| --------------- | ------------------------------------------- | ------------------------------------------------------------------- |
| PK              | 클러스터링되어 저장됨                       | 클러스터링 지원 안됨                                                |
| 세컨더리 인덱스 | 레코드 주소 대신 PK 값을 논리적 주소로 사용 | PK와 구조적으로 차이 없음. 유니크값을 가진 세컨더리 인덱스에 불과함 | 
